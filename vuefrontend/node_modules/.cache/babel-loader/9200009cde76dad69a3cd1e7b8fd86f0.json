{"remainingRequest":"C:\\Final-Project\\vuefrontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Final-Project\\vuefrontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Final-Project\\vuefrontend\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Final-Project\\vuefrontend\\src\\store\\modules\\user.js","mtime":1601975346564},{"path":"C:\\Final-Project\\vuefrontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Final-Project\\vuefrontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Final-Project\\vuefrontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IGdldEFQSSB9IGZyb20gJy4uLy4uL2F4aW9zLWFwaSc7IC8vIHN0YXRlIOeahCBBUElEYXRhIOeCuiBQb3N0cyDoo6HpnaLnmoTos4fmlpkKCnZhciBzdGF0ZSA9IHsKICBpc0xvZ2dlZGluOiBmYWxzZSwKICBhY2Nlc3NUb2tlbjogbnVsbCwKICByZWZyZXNoVG9rZW46IG51bGwsCiAgQVBJRGF0YTogJycKfTsKdmFyIGdldHRlcnMgPSB7CiAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYWNjZXNzVG9rZW4gIT0gbnVsbDsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgdXBkYXRlU3RvcmFnZTogZnVuY3Rpb24gdXBkYXRlU3RvcmFnZShzdGF0ZSwgX3JlZikgewogICAgdmFyIGFjY2VzcyA9IF9yZWYuYWNjZXNzLAogICAgICAgIHJlZnJlc2ggPSBfcmVmLnJlZnJlc2g7CiAgICBzdGF0ZS5hY2Nlc3NUb2tlbiA9IGFjY2VzczsKICAgIHN0YXRlLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2g7CiAgfSwKICBkZXN0cm95VG9rZW46IGZ1bmN0aW9uIGRlc3Ryb3lUb2tlbihzdGF0ZSkgewogICAgc3RhdGUuYWNjZXNzVG9rZW4gPSBudWxsOwogICAgc3RhdGUucmVmcmVzaFRva2VuID0gbnVsbDsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIHVzZXJMb2dvdXQ6IGZ1bmN0aW9uIHVzZXJMb2dvdXQoY29udGV4dCkgewogICAgaWYgKGNvbnRleHQuZ2V0dGVycy5sb2dnZWRJbikgewogICAgICBjb250ZXh0LmNvbW1pdCgnZGVzdHJveVRva2VuJyk7CiAgICB9CiAgfSwKICB1c2VyTG9naW46IGZ1bmN0aW9uIHVzZXJMb2dpbihjb250ZXh0LCB1c2VyY3JlZGVudGlhbHMpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldEFQSS5wb3N0KCcvYXBpLXRva2VuLycsIHsKICAgICAgICB1c2VybmFtZTogdXNlcmNyZWRlbnRpYWxzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB1c2VyY3JlZGVudGlhbHMucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb250ZXh0LmNvbW1pdCgndXBkYXRlU3RvcmFnZScsIHsKICAgICAgICAgIGFjY2VzczogcmVzcG9uc2UuZGF0YS5hY2Nlc3MsCiAgICAgICAgICByZWZyZXNoOiByZXNwb25zZS5kYXRhLnJlZnJlc2gKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICByZWplY3QoZXJyKTsKICAgICAgfSk7CiAgICB9KTsKICB9IC8vIHVzZXJSZWdpc3Rlcihjb250ZXh0LCB1c2VyY3JlZGVudGlhbHMpIHsKICAvLyAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAvLyAgICAgICAgIGdldEFQSQogIC8vICAgICAgICAgICAgIC5wb3N0KCdodHRwOi8vMTI3LjAuMC4xOjgwMDAvYXBpL3VzZXJzLycsIHsKICAvLyAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJjcmVkZW50aWFscy51c2VybmFtZSwKICAvLyAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJjcmVkZW50aWFscy5lbWFpbCwKICAvLyAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHVzZXJjcmVkZW50aWFscy5wYXNzd29yZCwKICAvLyAgICAgICAgICAgICB9KQogIC8vICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAvLyAgICAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3VwZGF0ZVN0b3JhZ2UnLCB7IGFjY2VzczogcmVzcG9uc2UuZGF0YS5hY2Nlc3MsIHJlZnJlc2g6IHJlc3BvbnNlLmRhdGEucmVmcmVzaCB9KQogIC8vICAgICAgICAgICAgICAgICByZXNvbHZlKCkKICAvLyAgICAgICAgICAgICB9KQogIC8vICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogIC8vICAgICAgICAgICAgICAgICByZWplY3QoZXJyKQogIC8vICAgICAgICAgICAgIH0pCiAgLy8gICAgIH0pCiAgLy8gfQoKfTsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["C:/Final-Project/vuefrontend/src/store/modules/user.js"],"names":["getAPI","state","isLoggedin","accessToken","refreshToken","APIData","getters","loggedIn","mutations","updateStorage","access","refresh","destroyToken","actions","userLogout","context","commit","userLogin","usercredentials","Promise","resolve","reject","post","username","password","then","response","data","catch","err"],"mappings":";AAAA,SAASA,MAAT,QAAuB,iBAAvB,C,CAEA;;AAEA,IAAMC,KAAK,GAAG;AACVC,EAAAA,UAAU,EAAE,KADF;AAEVC,EAAAA,WAAW,EAAE,IAFH;AAGVC,EAAAA,YAAY,EAAE,IAHJ;AAIVC,EAAAA,OAAO,EAAE;AAJC,CAAd;AAOA,IAAMC,OAAO,GAAG;AACZC,EAAAA,QADY,oBACHN,KADG,EACI;AACZ,WAAOA,KAAK,CAACE,WAAN,IAAqB,IAA5B;AACH;AAHW,CAAhB;AAMA,IAAMK,SAAS,GAAG;AACdC,EAAAA,aADc,yBACAR,KADA,QAC4B;AAAA,QAAnBS,MAAmB,QAAnBA,MAAmB;AAAA,QAAXC,OAAW,QAAXA,OAAW;AACtCV,IAAAA,KAAK,CAACE,WAAN,GAAoBO,MAApB;AACAT,IAAAA,KAAK,CAACG,YAAN,GAAqBO,OAArB;AACH,GAJa;AAKdC,EAAAA,YALc,wBAKDX,KALC,EAKM;AAChBA,IAAAA,KAAK,CAACE,WAAN,GAAoB,IAApB;AACAF,IAAAA,KAAK,CAACG,YAAN,GAAqB,IAArB;AACH;AARa,CAAlB;AAWA,IAAMS,OAAO,GAAG;AACZC,EAAAA,UADY,sBACDC,OADC,EACQ;AAChB,QAAIA,OAAO,CAACT,OAAR,CAAgBC,QAApB,EAA8B;AAC1BQ,MAAAA,OAAO,CAACC,MAAR,CAAe,cAAf;AACH;AACJ,GALW;AAMZC,EAAAA,SANY,qBAMFF,OANE,EAMOG,eANP,EAMwB;AAChC,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCrB,MAAAA,MAAM,CACDsB,IADL,CACU,aADV,EACyB;AACjBC,QAAAA,QAAQ,EAAEL,eAAe,CAACK,QADT;AAEjBC,QAAAA,QAAQ,EAAEN,eAAe,CAACM;AAFT,OADzB,EAKKC,IALL,CAKU,UAAAC,QAAQ,EAAI;AACdX,QAAAA,OAAO,CAACC,MAAR,CAAe,eAAf,EAAgC;AAAEN,UAAAA,MAAM,EAAEgB,QAAQ,CAACC,IAAT,CAAcjB,MAAxB;AAAgCC,UAAAA,OAAO,EAAEe,QAAQ,CAACC,IAAT,CAAchB;AAAvD,SAAhC;AACAS,QAAAA,OAAO;AACV,OARL,EASKQ,KATL,CASW,UAAAC,GAAG,EAAI;AACVR,QAAAA,MAAM,CAACQ,GAAD,CAAN;AACH,OAXL;AAYH,KAbM,CAAP;AAcH,GArBW,CAsBZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAtCY,CAAhB;AAyCA,eAAe;AACX5B,EAAAA,KAAK,EAALA,KADW;AAEXK,EAAAA,OAAO,EAAPA,OAFW;AAGXE,EAAAA,SAAS,EAATA,SAHW;AAIXK,EAAAA,OAAO,EAAPA;AAJW,CAAf","sourcesContent":["import { getAPI } from '../../axios-api'\r\n\r\n// state 的 APIData 為 Posts 裡面的資料\r\n\r\nconst state = {\r\n    isLoggedin: false,\r\n    accessToken: null,\r\n    refreshToken: null,\r\n    APIData: '',\r\n}\r\n\r\nconst getters = {\r\n    loggedIn(state) {\r\n        return state.accessToken != null\r\n    }\r\n}\r\n\r\nconst mutations = {\r\n    updateStorage(state, { access, refresh }) {\r\n        state.accessToken = access\r\n        state.refreshToken = refresh\r\n    },\r\n    destroyToken(state) {\r\n        state.accessToken = null\r\n        state.refreshToken = null\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    userLogout(context) {\r\n        if (context.getters.loggedIn) {\r\n            context.commit('destroyToken')\r\n        }\r\n    },\r\n    userLogin(context, usercredentials) {\r\n        return new Promise((resolve, reject) => {\r\n            getAPI\r\n                .post('/api-token/', {\r\n                    username: usercredentials.username,\r\n                    password: usercredentials.password\r\n                })\r\n                .then(response => {\r\n                    context.commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\r\n                    resolve()\r\n                })\r\n                .catch(err => {\r\n                    reject(err)\r\n                })\r\n        })\r\n    },\r\n    // userRegister(context, usercredentials) {\r\n    //     return new Promise((resolve, reject) => {\r\n    //         getAPI\r\n    //             .post('http://127.0.0.1:8000/api/users/', {\r\n    //                 username: usercredentials.username,\r\n    //                 email: usercredentials.email,\r\n    //                 password: usercredentials.password,\r\n    //             })\r\n    //             .then(response => {\r\n    //                 context.commit('updateStorage', { access: response.data.access, refresh: response.data.refresh })\r\n    //                 resolve()\r\n    //             })\r\n    //             .catch(err => {\r\n    //                 reject(err)\r\n    //             })\r\n    //     })\r\n    // }\r\n}\r\n\r\nexport default {\r\n    state,\r\n    getters,\r\n    mutations,\r\n    actions\r\n}"]}]}